{% extends "base.html" %}

{% block button %}
  <a class="px-6 py-2 bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary rounded-full font-semibold hover:bg-primary/20 dark:hover:bg-primary/30 transition-colors duration-200" href="/">Logout</a>
{% endblock %}

{% block content %}
<div class="w-full max-w-4xl space-y-8 bg-white dark:bg-[#063b20] p-10 rounded-xl shadow-lg">

  <!-- Header -->
    <div class="text-center">
      <div class="relative rounded-xl overflow-hidden">
    <img src="/static/images/contactUs.png" alt="Krishi Banner" class="w-full h-full sm:h-80 object-cover"/>
  </div>
    <h2 class="text-3xl font-bold text-primary dark:text-primary">
    <p class="mt-2 text-center text-sm text-gray-600 dark:text-gray-400">
      Have a question? Send us a message!
    </p>
    </h2>
  </div>

  <!-- Contact Info -->
  <div class="space-y-4 text-center">
    <p><strong>Address:</strong> 123 Krishi Nagar, Ahmedabad, Gujarat, India</p>
    <p><strong>Phone:</strong> +91 98765 43210</p>
    <p><strong>Email:</strong> hetvi5007@gmail.com</p>
  </div>

  <!-- Button to show form -->
  <div class="text-center">
    <button id="showFormBtn" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-lg text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200">
      Send Message
    </button>
  </div>

  <!-- Hidden Contact Form -->
  <div id="contactForm" class="hidden mt-6 space-y-6">
    <form action="{{ url_for('send_message') }}" method="POST" class="space-y-4">
      <div>
        <input type="text" name="name" placeholder="Your Name" required
          class="appearance-none rounded-lg relative block w-full px-4 py-3 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm" />
      </div>
      <div>
        <input type="email" name="email" placeholder="Your Email" required
          class="appearance-none rounded-lg relative block w-full px-4 py-3 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm" />
      </div>
      <div>
        <input type="text" name="subject" placeholder="Subject" required
          class="appearance-none rounded-lg relative block w-full px-4 py-3 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm" />
      </div>
      <div>
        <textarea name="message" rows="4" placeholder="Your Message" required
          class="appearance-none rounded-lg relative block w-full px-4 py-3 border border-gray-300 dark:border-gray-700 placeholder-gray-500 dark:placeholder-gray-400 text-gray-900 dark:text-white bg-background-light dark:bg-gray-800 focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"></textarea>
      </div>
      <div>
        <button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-semibold rounded-lg text-white bg-primary hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-200">
          Submit Message
        </button>
      </div>
    </form>
  </div>
</div>

<script>
  const showFormBtn = document.getElementById('showFormBtn');
  const contactForm = document.getElementById('contactForm');

  showFormBtn.addEventListener('click', () => {
    contactForm.classList.toggle('hidden');
    contactForm.scrollIntoView({ behavior: 'smooth' });
  });
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <script>
      {% for category, message in messages %}
        Swal.fire({
          title: message,
          icon: '{{ category }}' === 'success' ? 'success' : 'error',
          confirmButtonText: 'OK',
          timer: 2200,
        });
      {% endfor %}
    </script>
  {% endif %}
{% endwith %}

{% endblock %}

{% block footer %}
  {% include "footer.html" %}
{% endblock %}
